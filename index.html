<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>EventDemo — dApp (Separate files, patched)</title>
<style>
  :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
  body{max-width:980px;margin:28px auto;padding:18px;background:#fafafa;color:#111}
  .card{border-radius:12px;padding:14px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  button{padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
  button.primary{background:#2563eb;color:#fff}
  .events{max-height:300px;overflow-y:auto;border:1px solid #eee;padding:10px;border-radius:8px;background:#fff}
  .evt{padding:8px;border-bottom:1px dashed #eee}
  .small{color:#666;font-size:13px}
  pre{background:#f3f3f3;padding:12px;border-radius:8px;overflow:auto}
  input{padding:8px;border:1px solid #ddd;border-radius:6px}
</style>

<!-- ethers v6 UMD -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6.8.0/dist/ethers.umd.min.js"></script>
</head>
<body>
  <div class="card">
    <header style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <h2 style="margin:0">EventDemo dApp</h2>
        <div class="small">Events • Message • SIM Token</div>
      </div>
      <div style="text-align:right">
        <div id="walletStatus" class="small">Not connected</div>
        <!-- <-- patched contract address below --> -->
        <div id="contractAddr" class="small">0xb27A31f1b0AF2946B7F582768f03239b1eC07c2c</div>
      </div>
    </header>

    <hr>

    <div style="margin-top:12px">
      <button id="connect" class="primary">Connect Wallet</button>
      <button id="refreshEvents" style="margin-left:8px">Refresh Events</button>
      <button id="clearEvents" style="margin-left:8px">Clear</button>
    </div>

    <h3 style="margin-top:14px">Write Message</h3>
    <input id="msgInput" type="text" placeholder="Message" style="width:240px">
    <button id="setMsgBtn" style="margin-left:8px">setMessage()</button>
    <button id="pingBtn" style="margin-left:8px">ping()</button>

    <h3 style="margin-top:14px">Current on-chain message</h3>
    <div id="currentMessage" class="small">(not loaded)</div>
    <button id="readMsg" style="margin-top:8px">Refresh message</button>

    <h3 style="margin-top:14px">Event Logs</h3>
    <div id="events" class="events"></div>

    <h3 style="margin-top:14px">SIM Token</h3>
    <button id="show-sim-balance">Show Balance</button>
    <div style="margin-top:6px">Balance: <span id="sim-balance" class="small">0</span></div>

    <div style="margin-top:8px">
      <input id="sim-to" placeholder="Recipient address" style="width:260px">
      <input id="sim-amount" placeholder="Amount" style="width:120px;margin-left:8px">
      <button id="send-sim" style="margin-left:8px">Send SIM</button>
    </div>

    <h3 style="margin-top:14px">Debug Log</h3>
    <pre id="debug">Open Console for more logs.</pre>
  </div>

  <!-- app scripts -->
  <script src="token.js"></script>
  <script src="app.js"></script>
</body>
</html>
